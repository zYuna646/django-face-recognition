<VirtualHost *:8080>
    ServerName fer.webapps.digital
    ServerAdmin webmaster@fer.webapps.digital
    
    DocumentRoot /app

    <Directory /app>
        Require all granted
        Options -Indexes +FollowSymLinks
        AllowOverride All
    </Directory>

    # Static files handling
    Alias /static/ /app/staticfiles/
    <Directory /app/staticfiles>
        Require all granted
        Options -Indexes
    </Directory>

    # Media files handling
    Alias /media/ /app/media/
    <Directory /app/media>
        Require all granted
        Options -Indexes
    </Directory>

    # Proxy settings for Gunicorn
    ProxyPreserveHost On
    ProxyPass /static/ !
    ProxyPass /media/ !
    ProxyPass / http://127.0.0.1:3500/
    ProxyPassReverse / http://127.0.0.1:3500/

    # Custom headers
    Header set X-Served-By "Apache/Gunicorn"

    # Logging
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost> 