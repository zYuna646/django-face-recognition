<VirtualHost *:80>
    ServerName fer.webapps.digital
    ServerAdmin webmaster@localhost
    
    # Proxy for the main application
    ProxyRequests Off
    ProxyPreserveHost On
    
    # ProxyPass for static and media should come before the main proxy
    ProxyPass /static/ !
    ProxyPass /media/ !
    ProxyPass / http://localhost:8080/
    ProxyPassReverse / http://localhost:8080/
    
    # Serve static and media files directly
    Alias /static/ /root/django-face-recognition/static/
    <Directory /root/django-face-recognition/static>
        Require all granted
        Options -Indexes +FollowSymLinks
        AllowOverride None
        Order allow,deny
        Allow from all
    </Directory>
    
    Alias /media/ /root/django-face-recognition/upload/
    <Directory /root/django-face-recognition/upload>
        Require all granted
        Options -Indexes +FollowSymLinks
        AllowOverride None
        Order allow,deny
        Allow from all
    </Directory>
    
    # Detailed logging
    LogLevel debug
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost> 